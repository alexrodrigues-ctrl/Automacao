//----Conexao no Banco de Dados, criar as query no SQL, e apenas chamar C# //fazer um procedimento: buscar, inserir, apagar e editar.

//na query
--para utilizar o banco de dados dbcomercio
use dbcomercio

--procedimento mostar
create proc spmostrar_categoria
as
select top 200 *from categoria
order by idcategoria desc
go

--procedimento buscar nome
create proc spbuscar_nome
@textobuscar varchar(50)
as select * from categoria
where nome like @textobuscar + '%'
go

--procedimento inserir na categoria: o variavel @idcategoria, será usado no speditar_categoria, p/ ser setado no idcategoria
create proc spinserir_categoria
@idcategoria int output,
@nome varchar(50) ,
@descricao varchar(100)
as
insert into categoria (nome, descricao)
values (@nome, @descricao)
go 

--procedimento editar a categoria: neste caso vou setar no idcategoria as edições feitas (nome=@nome, descricao=@descricao 'onde' idcategoria=@idcategoria)
create proc speditar_categoria
@idcategoria int,
@nome varchar(50) ,
@descricao varchar(100)
as
update categoria set
 nome=@nome,
 descricao=@descricao where
 idcategoria=@idcategoria
 go

 --procedimento deletar
 create proc spdeletar_categoria
 @idcategoria int
 as
 delete from categoria where
 idcategoria=@idcategoria
 go

 //fim query

 //----no projeto CamadaDados, vamos criar uma segunda classe chamada 'DCategoria' - class DCategoria //Classe Dados da Categoria
 nessa classe 'DCategoria' vamos criar as propriedade p/ obter e setar os campos.

11/06/2020 
//na classe DCategoria vamos continua criando os construtores, um vazio q ser generico p/ todas as classes, e outro com parametros do tipo 'int DCategoria Categoria'
p/ reacionar os campos das propriedades com o banco de dados, usando o this.
//cria metodos 'inserir, editar, busca, mostrar' p/ tratar e chamar quando for necessario.

continuando 11/06/2020
-preparando os méodos p/ acessar o dados, lembrando de fazer tramanto de erros, try, catch, finally, veja classe DCategoria
-iniciar paramentos p/ insercao.

12/06/2020 -parte1
//terminado de codificar no C# a chamada via a procedures e conexao do banco de dados na CamadaDados nos metodos() inserir, editar, excluir, mostrar  e buscarnome.
-assim terminei de preparar minha CamadaDados na classe 'DCategoria'.
-agora vamos trabalhar na CamadaNegocio: a CamadaNegocio é referenciada a CamadaDados, para se comunicarem entre si,
-na CamadaNegocio, vamos cria uma camada NCategoria p/ cria os metodos onde vamos criar os obejos p/ inserir, editar, excluir etc.



        